
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Working with ev3dev remotely using RPyC &#8212; python-ev3dev 1.1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Frequently-Asked Questions" href="faq.html" />
    <link rel="prev" title="Other classes" href="other.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          python-ev3dev</a>
        <span class="navbar-text navbar-version pull-left"><b>1.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/ev3dev/ev3dev-lang-python">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="upgrading-to-stretch.html">Upgrading from ev3dev-jessie (library v1) to ev3dev-stretch (library v2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading-to-stretch.html#once-you-ve-adapted-to-breaking-changes-check-out-the-cool-new-features">Once you’ve adapted to breaking changes, check out the cool new features!</a></li>
<li class="toctree-l1"><a class="reference internal" href="spec.html">API reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Working with ev3dev remotely using RPyC</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently-Asked Questions</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Working with ev3dev remotely using RPyC</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="other.html" title="Previous Chapter: Other classes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Other classes</span>
    </a>
  </li>
  <li>
    <a href="faq.html" title="Next Chapter: Frequently-Asked Questions"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Frequently-As... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/rpyc.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="working-with-ev3dev-remotely-using-rpyc">
<h1>Working with ev3dev remotely using RPyC<a class="headerlink" href="#working-with-ev3dev-remotely-using-rpyc" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://rpyc.readthedocs.io/">RPyC</a> (pronounced as are-pie-see), or Remote Python Call, is a transparent
python library for symmetrical remote procedure calls, clustering and
distributed-computing. RPyC makes use of object-proxying, a technique that
employs python’s dynamic nature, to overcome the physical boundaries between
processes and computers, so that remote objects can be manipulated as if they
were local. Here are simple steps you need to follow in order to install and
use RPyC with ev3dev:</p>
<ol class="arabic">
<li><p class="first">Install RPyC both on the EV3 and on your desktop PC. For the EV3, enter the
following command at the command prompt (after you <a class="reference external" href="http://www.ev3dev.org/docs/tutorials/connecting-to-ev3dev-with-ssh/">connect with SSH</a>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo easy_install3 rpyc
</pre></div>
</div>
<p>On the desktop PC, it really depends on your operating system. In case it is
some flavor of linux, you should be able to do</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo pip3 install rpyc
</pre></div>
</div>
<p>In case it is Windows, there is a win32 installer on the project’s
<a class="reference external" href="http://sourceforge.net/projects/rpyc/files/main">sourceforge page</a>. Also, have a look at the <a class="reference external" href="http://rpyc.readthedocs.io/en/latest/install.html">Download and Install</a> page
on their site.</p>
</li>
<li><p class="first">Create file <code class="docutils literal notranslate"><span class="pre">rpyc_server.sh</span></code> with the following contents on the EV3:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
python3 <span class="sb">`</span>which rpyc_classic.py<span class="sb">`</span>
</pre></div>
</div>
<p>and make the file executable:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>chmod +x rpyc_server.sh
</pre></div>
</div>
<p>Launch the created file either from SSH session (with
<code class="docutils literal notranslate"><span class="pre">./rpyc_server.sh</span></code> command), or from brickman. It should output something
like</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>INFO:SLAVE/18812:server started on [0.0.0.0]:18812
</pre></div>
</div>
<p>and keep running.</p>
</li>
<li><p class="first">Now you are ready to connect to the RPyC server from your desktop PC. The
following python script should make a large motor connected to output port
<code class="docutils literal notranslate"><span class="pre">A</span></code> spin for a second.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rpyc</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">rpyc</span><span class="o">.</span><span class="n">classic</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;ev3dev&#39;</span><span class="p">)</span> <span class="c1"># host name or IP address of the EV3</span>
<span class="n">ev3</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;ev3dev2.ev3&#39;</span><span class="p">]</span>      <span class="c1"># import ev3dev2.ev3 remotely</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">ev3</span><span class="o">.</span><span class="n">LargeMotor</span><span class="p">(</span><span class="s1">&#39;outA&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">run_timed</span><span class="p">(</span><span class="n">time_sp</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">speed_sp</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>You can run scripts like this from any interactive python environment, like
ipython shell/notebook, spyder, pycharm, etc.</p>
<p>Some <em>advantages</em> of using RPyC with ev3dev are:</p>
<ul class="simple">
<li>It uses much less resources than running ipython notebook on EV3; RPyC server
is lightweight, and only requires an IP connection to the EV3 once set up (no
ssh required).</li>
<li>The scripts you are working with are actually stored and edited on your
desktop PC, with your favorite editor/IDE.</li>
<li>Some robots may need much more computational power than what EV3 can give
you. A notable example is the Rubics cube solver: there is an algorithm that
provides almost optimal solution (in terms of number of cube rotations), but
it takes more RAM than is available on EV3. With RPYC, you could run the
heavy-duty computations on your desktop.</li>
</ul>
<p>The most obvious <em>disadvantage</em> is latency introduced by network connection.
This may be a show stopper for robots where reaction speed is essential.</p>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Ralph Hempel et al.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>